@page "/beatmaps"
@using Oldsu.Types
@using Oldsu.Web
@model Oldsu.Web.Pages.BeatmapListing

@{
    Layout = "BaseLayoutWithBanner";
}


@* this might be retarded since this isn't a head *@
<link href=@PathCorrection.Correct("/resources/css/beatmap_listing.css") rel="stylesheet">
<link href=@PathCorrection.Correct("/resources/css/beatmap_preview.css") rel="stylesheet">

<div class="beatmap_listing_content" style="flex-direction: column">
    <form name="search_settings_wrapper">
        <div class="inputbar_wrapper" id="inputbar_beatmap_search">
            <p class="inputbar_label">Search for:</p>
            <input class="inputbar_text" type="text" name="query" value="@Model.SearchQuery"/>
        </div>
        <input type="submit" id="beatmap_search_submit" value="Search" class="submit_button">
    </form>
        
    <div class="beatmap_list">
        @{
            if(Model.BeatmapSets == null) {
                <p>No results match that query.</p>
            } else {
                foreach(Beatmapset beatmapSet in Model.BeatmapSets) {
                    <div class="beatmap_preview_wrapper" style="background-image: linear-gradient(#FFFFFF, #FFFFFF), url('/resources/image/discoprincebg.jpg');">
                        <p class="beatmap_preview_title">@beatmapSet.Title</p>
                        <p class="beatmap_preview_artist">@beatmapSet.Artist</p>    
                        <p class="beatmap_preview_mapper">Mapped by <a href="/u/@beatmapSet.CreatorID">@beatmapSet.CreatorName</a></p>
                        <p class="beatmap_preview_info" title="Ranked by @beatmapSet.RankedBy"><b>Ranked</b></p>
                    </div>
                }
            }
            var paginator = Model.BeatmapService.GetBeatmapPaginator(20);
            var newest = await paginator.GetNewestPageAsync(0);
            foreach (var beatmapset in newest)
            {
                <div class="card">
                    <p style="float: left;"><img class="card-image" src="https://cdn.britannica.com/43/172743-138-545C299D/overview-Barack-Obama.jpg?w=800&h=450&c=crop"
                                                 style="width: 200px;
                                                       float: left; " >
                    </p>
                    <div class="card-body">
                        <div class="card-info"style=
                             "clear: left;
                           color: black; 
                           
                            outline: 1px;
">              
                            <h5 class="card-title">@beatmapset.Artist - @beatmapset.Title</h5>
                            <h5 class="card-creator">Mapper: @beatmapset.CreatorName</h5>
                            <h5 class="card-submitdate">Submitted at: @beatmapset.SubmittedAt</h5>
                            <h5 class="card-ranking-status">Ranking Status: @beatmapset.RankingStatus</h5>
                        </div>
                        <button class="delete-beatmapset"
                                style="
                                background-color : rgb(176,166,166);
                                color: white;
                                padding: 5px 11px;
                                border-radius: 7px;
                                border-color: rgb(176,166,166);
                                size: 10px;
                                 ">Download</button>
                    </div>
                </div> 
            }
        }
    </div>
</div>

<style>
    h5 {
        color: #ffeaea;
    } 
</style>
